<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<link rel='stylesheet' type='text/css' href='style.css' />
<title id="titel">ESPNode Hilfeseite</title>
</head>
<body>

<h3>cmd Abfragen</h3>

<h4>webcfg1</h4>
Wird von jeder der eingebauten Seiten aufgerufen, enthält die konfiguration als JSON.
Folgende Key / Value Paare werden bereitgestellt:
<table>
<tr><th>Key</th><th>Value</th><th>Anmerkung</th></tr>
<tr><td>titel1</td><td>Text der obersten Zeile</td><td>Muss vorhanden sein</td></tr>
<tr><td>titel2</td><td>Text der zweiten Zeile</td><td>Optional, wenn nicht vorhanden wird die Zeile nicht angezeigt</td></tr>
<tr><td>msg1</td><td>1</td><td>Soll das 1. Nachrichtenfeld angezeigt werden wird eine "1" gesendet, soll das Feld nicht angezeigt werden entfällt dieser Key</td></tr>
<tr><td>msg2</td><td>1</td><td>Soll das 2. Nachrichtenfeld angezeigt werden wird eine "1" gesendet, soll das Feld nicht angezeigt werden entfällt dieser Key</td></tr>
</table>

<h4>webcfg2</h4>
Einstellungen zum Logging


<h4>sw1 ... sw4</h4>
Gibt Eigenschaften des Schalters 1...4 als JSON zurück.
Das sind die Keys: state = Ein oder Aus; label = Beschriftungstext des Schalters.

<h4>sensor1</h4>
Gibt Informationen zum verbauten Sensor als JSON zurück.
<table>
<tr><th>Key</th><th>Value</th><th>Anmerkung</th></tr>
<tr><td>typ</td><td>Der Sensortyp</td><td>Muss vorhanden sein</td></tr>
<tr><td>Temperatur</td><td>Die gemessene Temperatur</td><td>Optional: Bei Temperatursensoren</td></tr>
<tr><td>Resolution</td><td>Die Auflösung des Sensors</td><td>Optional</td></tr>
</table>

<h1>FHEM</h1>
<p>Fhem Codeschnipsel, damit auch der Weg FHEM zu DEVICE funktioniert.</p>
<pre>
  attr MQTT2_wittynode setList RGB_RT:0,1 cmnd/wittynode/RGB_RT $EVTPART1\
  RGB_BL:0,1 cmnd/wittynode/RGB_BL $EVTPART1\
  RGB_GN:0,1 cmnd/wittynode/RGB_GN $EVTPART1
</pre>
<p>Aufruf in FHEM mit:</p>
<pre>
  set MQTT2_wittynode RGB_BL 1
</pre>



Unsortiert:
<pre>
  define MQTT2_ESPNode MQTT2_DEVICE ESPNode
setuuid MQTT2_ESPNode 6060a478-f33f-88ab-0c6b-389c8e0d6d014b6b
attr MQTT2_ESPNode IODev MQTT2_FHEM_Server
attr MQTT2_ESPNode readingList ESPNode:stat/ESPNode/LED:.* LED\
ESPNode:stat/ESPNode/Line1:.* Line1\
ESPNode:tele/ESPNode/INFO1:.* { json2nameValue($EVENT) }\
ESPNode:tele/ESPNode/INFO2:.* { json2nameValue($EVENT) }\
ESPNode:stat/ESPNode/LED_intensity:.* LED_intensity\
ESPNode:stat/ESPNode/Line2:.* Line2\
ESPNode:stat/ESPNode/Line3:.* Line3\
ESPNode:stat/ESPNode/Grafik:.* Grafik\
ESPNode:stat/ESPNode/Text:.* Text
attr MQTT2_ESPNode room MQTT2_DEVICE
attr MQTT2_ESPNode setList Line1:textField cmnd/ESPNode/Line1 $EVTPART1 \\
Line2:textField cmnd/ESPNode/Line2 $EVTPART1 \\
Line3:textField cmnd/ESPNode/Line3 $EVTPART1 \\
Text:textField cmnd/ESPNode/Text $EVTPART1 \\
Grafik:textField cmnd/ESPNode/Grafik $EVTPART1 \\
LED:0,1 cmnd/ESPNode/LED $EVTPART1 \\
LED_intensity cmnd/ESPNode/LED_intensity $EVTPART1
define job_every_min at +*0:01 { \
  fhem("set MQTT2_ESPNode Line1 ".substr($hms,0,5));; \
}
setuuid job_every_min 6060d110-f33f-88ab-1ad1-d259bbab254dc700
attr job_every_min alignTime 17:21
attr job_every_min room Jobs
</pre>
Die letzten 3 Backups der fhem.cfg befinden sich unter: /sd_p2/opt/fhem/restoreDir/save/
(ggf. im Backup suchen)




</body>
